{
  "openapi": "3.0.3",
  "info": {
    "title": "Rebell Payments API",
    "version": "0.2.0-draft",
    "description": "\nOpenAPI derived from \"Rebell API Specifications â€“ (Draft for estimate integration)\".\nThis spec covers authentication headers (RSA SHA256 signature), payment creation, inquiry, retail pay,\nand webhook notification payloads.\n\n---\n## Swagger UI local setup (dynamic headers)\nThis API requires `Request-Time` (RFC 3339) and an RSA-SHA256 `Signature` computed **at request time** over:\n\n```text\nMETHOD + \"\\n\" + HTTP_URI + \"\\n\" + Client-Id + \"\\n\" + Request-Time + \"\\n\" + BODY\n```\n\n**Recommended pattern (no cloud):**\n- Serve this spec with Swagger UI locally.\n- Use a `requestInterceptor` to set `Client-Id`, compute fresh `Request-Time`, and call a **local signer** (running on localhost) to produce the base64 signature.\n- Inject the resulting header: `Signature: algorithm=SHA256withRSA, keyVersion={keyVersion}, signature={base64}`.\n\nSee `x-swagger-ui-requestInterceptor` in this spec for a drop-in snippet and the minimal Node.js signer.\n\n\n### Note on Swagger UI layouts\nIf you see `No layout defined for \"StandaloneLayout\"`, either:\n- include `SwaggerUIStandalonePreset` in your HTML and set `layout: \"StandaloneLayout\"`, **or**\n- simply use `layout: \"BaseLayout\"` (this spec's embedded snippet uses BaseLayout for compatibility).\n"
  },
  "servers": [
    {
      "url": "https://api.rebellapp.com",
      "description": "Production"
    },
    {
      "url": "https://sandbox-api.rebellapp.com",
      "description": "Sandbox (testing)"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "Signature and headers"
    },
    {
      "name": "Payments"
    },
    {
      "name": "Webhooks"
    }
  ],
  "security": [
    {
      "RebellSignature": [],
      "ClientId": [],
      "RequestTime": []
    }
  ],
  "paths": {
    "/v1/payments/createQROrder": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Initiate Online Payment with QR Code (Merchant Presented QR)",
        "operationId": "createQROrder",
        "security": [
          {
            "RebellSignature": [],
            "ClientId": [],
            "RequestTime": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateQROrderRequest"
              },
              "examples": {
                "example": {
                  "value": {
                    "bizType": "ORDER_CODE",
                    "productCode": "5105010010000100040",
                    "codeType": "CGCP",
                    "paymentRequestId": "20220914595540652867492",
                    "paymentAmount": {
                      "currency": "EUR",
                      "value": 1000
                    },
                    "order": {
                      "orderDescription": "Latte x2",
                      "orderMemo": "No sugar",
                      "latitude": "45.0703",
                      "longitude": "7.6869",
                      "transactionAddress": "Torino||Corso Duca degli Abruzzi,24||10129||IT||Italy",
                      "merchant": {
                        "store": {
                          "externalStoreId": "STORE_001"
                        }
                      }
                    },
                    "paymentNotifyUrl": "https://merchant.example.com/rebell/webhook",
                    "extendInfo": "{\"key\":\"value\"}"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateQROrderResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL",
            "source": "curl -X POST https://api.rebellapp.com/v1/payments/createQROrder \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Client-Id: YOUR_CLIENT_ID\" \\\n  -H \"Request-Time: 2024-01-10T12:00:00Z\" \\\n  -H \"Signature: algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE\" \\\n  -d '{\n    \"bizType\": \"ORDER_CODE\",\n    \"productCode\": \"5105010010000100040\",\n    \"codeType\": \"CGCP\",\n    \"paymentRequestId\": \"REQ_abc_123\",\n    \"paymentAmount\": {\n      \"currency\": \"EUR\",\n      \"value\": 1000\n    },\n    \"order\": {\n      \"orderDescription\": \"Latte x2\"\n    },\n    \"paymentNotifyUrl\": \"https://merchant.example.com/webhook\"\n  }'"
          },
          {
            "lang": "JavaScript",
            "label": "Node.js",
            "source": "const response = await fetch('https://api.rebellapp.com/v1/payments/createQROrder', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n    'Client-Id': 'YOUR_CLIENT_ID',\n    'Request-Time': new Date().toISOString(),\n    'Signature': 'algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE'\n  },\n  body: JSON.stringify({\n    bizType: 'ORDER_CODE',\n    productCode: '5105010010000100040',\n    codeType: 'CGCP',\n    paymentRequestId: 'REQ_abc_123',\n    paymentAmount: { currency: 'EUR', value: 1000 },\n    order: { orderDescription: 'Latte x2' },\n    paymentNotifyUrl: 'https://merchant.example.com/webhook'\n  })\n});\n\nconst data = await response.json();\nconsole.log(data.qrCode); // Display QR code to customer"
          },
          {
            "lang": "Python",
            "label": "Python",
            "source": "import requests\n\nresponse = requests.post(\n    'https://api.rebellapp.com/v1/payments/createQROrder',\n    headers={\n        'Content-Type': 'application/json',\n        'Client-Id': 'YOUR_CLIENT_ID',\n        'Request-Time': '2024-01-10T12:00:00Z',\n        'Signature': 'algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE'\n    },\n    json={\n        'bizType': 'ORDER_CODE',\n        'productCode': '5105010010000100040',\n        'codeType': 'CGCP',\n        'paymentRequestId': 'REQ_abc_123',\n        'paymentAmount': {'currency': 'EUR', 'value': 1000},\n        'order': {'orderDescription': 'Latte x2'},\n        'paymentNotifyUrl': 'https://merchant.example.com/webhook'\n    }\n)\n\ndata = response.json()\nprint(data['qrCode'])  # Display QR code to customer"
          }
        ]
      }
    },
    "/v1/payments/inquiryPayment": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Get Payment Information (Polling)",
        "operationId": "inquiryPayment",
        "security": [
          {
            "RebellSignature": [],
            "ClientId": [],
            "RequestTime": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InquiryRequest"
              },
              "examples": {
                "example": {
                  "value": {
                    "paymentId": "20220914595540652867492",
                    "paymentRequestId": "REQ_abc_123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InquiryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL",
            "source": "curl -X POST https://api.rebellapp.com/v1/payments/inquiryPayment \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Client-Id: YOUR_CLIENT_ID\" \\\n  -H \"Request-Time: 2024-01-10T12:00:00Z\" \\\n  -H \"Signature: algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE\" \\\n  -d '{\n    \"paymentId\": \"20220914595540652867492\",\n    \"paymentRequestId\": \"REQ_abc_123\"\n  }'"
          },
          {
            "lang": "JavaScript",
            "label": "Node.js",
            "source": "const response = await fetch('https://api.rebellapp.com/v1/payments/inquiryPayment', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n    'Client-Id': 'YOUR_CLIENT_ID',\n    'Request-Time': new Date().toISOString(),\n    'Signature': 'algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE'\n  },\n  body: JSON.stringify({\n    paymentId: '20220914595540652867492',\n    paymentRequestId: 'REQ_abc_123'\n  })\n});\n\nconst data = await response.json();\nconsole.log(data.paymentStatus); // SUCCESS, PROCESSING, or FAIL"
          },
          {
            "lang": "Python",
            "label": "Python",
            "source": "import requests\n\nresponse = requests.post(\n    'https://api.rebellapp.com/v1/payments/inquiryPayment',\n    headers={\n        'Content-Type': 'application/json',\n        'Client-Id': 'YOUR_CLIENT_ID',\n        'Request-Time': '2024-01-10T12:00:00Z',\n        'Signature': 'algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE'\n    },\n    json={\n        'paymentId': '20220914595540652867492',\n        'paymentRequestId': 'REQ_abc_123'\n    }\n)\n\ndata = response.json()\nprint(data['paymentStatus'])  # SUCCESS, PROCESSING, or FAIL"
          }
        ]
      }
    },
    "/v1/payments/retailPay": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Initiate Retail Payment (Customer Wallet Presented QR/Barcode)",
        "operationId": "retailPay",
        "security": [
          {
            "RebellSignature": [],
            "ClientId": [],
            "RequestTime": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RetailPayRequest"
              },
              "examples": {
                "example": {
                  "value": {
                    "productCode": "5105010010000100040",
                    "paymentRequestId": "REQ_abc_456",
                    "paymentAuthCode": "289123456789012345",
                    "paymentAmount": {
                      "currency": "EUR",
                      "value": 2500
                    },
                    "order": {
                      "orderDescription": "In-store purchase"
                    },
                    "paymentNotifyUrl": "https://merchant.example.com/rebell/webhook",
                    "extendInfo": "{\"promo\":\"WINTER\"}"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetailPayResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL",
            "source": "curl -X POST https://api.rebellapp.com/v1/payments/retailPay \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Client-Id: YOUR_CLIENT_ID\" \\\n  -H \"Request-Time: 2024-01-10T12:00:00Z\" \\\n  -H \"Signature: algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE\" \\\n  -d '{\n    \"productCode\": \"5105010010000100040\",\n    \"paymentRequestId\": \"REQ_abc_456\",\n    \"paymentAuthCode\": \"289123456789012345\",\n    \"paymentAmount\": {\n      \"currency\": \"EUR\",\n      \"value\": 2500\n    },\n    \"order\": {\n      \"orderDescription\": \"In-store purchase\"\n    },\n    \"paymentNotifyUrl\": \"https://merchant.example.com/webhook\"\n  }'"
          },
          {
            "lang": "JavaScript",
            "label": "Node.js",
            "source": "const response = await fetch('https://api.rebellapp.com/v1/payments/retailPay', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n    'Client-Id': 'YOUR_CLIENT_ID',\n    'Request-Time': new Date().toISOString(),\n    'Signature': 'algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE'\n  },\n  body: JSON.stringify({\n    productCode: '5105010010000100040',\n    paymentRequestId: 'REQ_abc_456',\n    paymentAuthCode: '289123456789012345', // Scanned from customer's wallet\n    paymentAmount: { currency: 'EUR', value: 2500 },\n    order: { orderDescription: 'In-store purchase' },\n    paymentNotifyUrl: 'https://merchant.example.com/webhook'\n  })\n});\n\nconst data = await response.json();\nif (data.result.resultStatus === 'S') {\n  console.log('Payment successful:', data.paymentId);\n}"
          },
          {
            "lang": "Python",
            "label": "Python",
            "source": "import requests\n\nresponse = requests.post(\n    'https://api.rebellapp.com/v1/payments/retailPay',\n    headers={\n        'Content-Type': 'application/json',\n        'Client-Id': 'YOUR_CLIENT_ID',\n        'Request-Time': '2024-01-10T12:00:00Z',\n        'Signature': 'algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE'\n    },\n    json={\n        'productCode': '5105010010000100040',\n        'paymentRequestId': 'REQ_abc_456',\n        'paymentAuthCode': '289123456789012345',  # Scanned from customer's wallet\n        'paymentAmount': {'currency': 'EUR', 'value': 2500},\n        'order': {'orderDescription': 'In-store purchase'},\n        'paymentNotifyUrl': 'https://merchant.example.com/webhook'\n    }\n)\n\ndata = response.json()\nif data['result']['resultStatus'] == 'S':\n    print('Payment successful:', data['paymentId'])"
          }
        ]
      }
    },
    "/v1/payments/linkPayCreate": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "Create Link Pay Order (App-to-App or Browser Redirect)",
        "operationId": "linkPayCreate",
        "description": "Create a payment order that returns redirect URLs for app-to-app or browser-to-app payment flows. The user is redirected to the Rebell SuperApp to authorize the payment.",
        "security": [
          {
            "RebellSignature": [],
            "ClientId": [],
            "RequestTime": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LinkPayCreateRequest"
              },
              "examples": {
                "example": {
                  "value": {
                    "productCode": "5105010010000100040",
                    "paymentRequestId": "checkout-20240321-987",
                    "paymentAmount": {
                      "currency": "EUR",
                      "value": 499
                    },
                    "order": {
                      "orderDescription": "Monthly subscription - Premium plan",
                      "merchant": {
                        "store": {
                          "externalStoreId": "STORE-77"
                        }
                      }
                    },
                    "settlementStrategy": {
                      "settlementCurrency": "EUR"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LinkPayCreateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "x-codeSamples": [
          {
            "lang": "cURL",
            "label": "cURL",
            "source": "curl -X POST https://api.rebellapp.com/v1/payments/linkPayCreate \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Client-Id: YOUR_CLIENT_ID\" \\\n  -H \"Request-Time: 2024-01-10T12:00:00Z\" \\\n  -H \"Signature: algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE\" \\\n  -d '{\n    \"productCode\": \"5105010010000100040\",\n    \"paymentRequestId\": \"checkout-20240321-987\",\n    \"paymentAmount\": {\n      \"currency\": \"EUR\",\n      \"value\": 499\n    },\n    \"order\": {\n      \"orderDescription\": \"Monthly subscription - Premium plan\"\n    },\n    \"settlementStrategy\": {\n      \"settlementCurrency\": \"EUR\"\n    }\n  }'"
          },
          {
            "lang": "JavaScript",
            "label": "Node.js",
            "source": "const response = await fetch('https://api.rebellapp.com/v1/payments/linkPayCreate', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n    'Client-Id': 'YOUR_CLIENT_ID',\n    'Request-Time': new Date().toISOString(),\n    'Signature': 'algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE'\n  },\n  body: JSON.stringify({\n    productCode: '5105010010000100040',\n    paymentRequestId: `checkout-${orderId}-${Date.now()}`,\n    paymentAmount: { currency: 'EUR', value: 499 },\n    order: { orderDescription: 'Monthly subscription - Premium plan' },\n    settlementStrategy: { settlementCurrency: 'EUR' }\n  })\n});\n\nconst data = await response.json();\n// Redirect user to Rebell app\nwindow.location.href = data.appLinks.ios.shortUrl; // or android"
          },
          {
            "lang": "Python",
            "label": "Python",
            "source": "import requests\n\nresponse = requests.post(\n    'https://api.rebellapp.com/v1/payments/linkPayCreate',\n    headers={\n        'Content-Type': 'application/json',\n        'Client-Id': 'YOUR_CLIENT_ID',\n        'Request-Time': '2024-01-10T12:00:00Z',\n        'Signature': 'algorithm=SHA256withRSA, keyVersion=1, signature=BASE64_SIGNATURE'\n    },\n    json={\n        'productCode': '5105010010000100040',\n        'paymentRequestId': f'checkout-{order_id}-{int(time.time())}',\n        'paymentAmount': {'currency': 'EUR', 'value': 499},\n        'order': {'orderDescription': 'Monthly subscription - Premium plan'},\n        'settlementStrategy': {'settlementCurrency': 'EUR'}\n    }\n)\n\ndata = response.json()\n# Return redirect URLs to frontend\nredirect_url = data['redirectUrl']\napp_links = data['appLinks']"
          }
        ]
      }
    },
    "/webhooks/paymentNotify": {
      "post": {
        "tags": [
          "Webhooks"
        ],
        "summary": "Payment notification (callback from Rebell to Merchant)",
        "description": "Merchant-provided HTTPS endpoint that receives payment events. Events: `payment.succeeded`, `payment.failed`.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentNotification"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Acknowledge receipt",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebhookAck"
                }
              }
            }
          }
        },
        "x-codeSamples": [
          {
            "lang": "JavaScript",
            "label": "Express.js Handler",
            "source": "// Webhook endpoint to receive payment notifications\napp.post('/webhooks/rebell', express.json(), (req, res) => {\n  // 1. Verify the signature (see Authentication docs)\n  if (!verifySignature(req)) {\n    return res.status(401).json({ result: { resultStatus: 'F' } });\n  }\n\n  const { paymentId, paymentRequestId, paymentStatus, paymentAmount } = req.body;\n\n  // 2. Process the payment result\n  if (paymentStatus === 'SUCCESS') {\n    // Update order status, trigger fulfillment, etc.\n    updateOrderStatus(paymentRequestId, 'paid');\n  } else if (paymentStatus === 'FAIL') {\n    updateOrderStatus(paymentRequestId, 'failed');\n  }\n\n  // 3. Acknowledge receipt\n  res.json({ result: { resultStatus: 'S' } });\n});"
          },
          {
            "lang": "Python",
            "label": "Flask Handler",
            "source": "from flask import Flask, request, jsonify\n\n@app.route('/webhooks/rebell', methods=['POST'])\ndef handle_payment_webhook():\n    # 1. Verify the signature (see Authentication docs)\n    if not verify_signature(request):\n        return jsonify({'result': {'resultStatus': 'F'}}), 401\n\n    data = request.json\n    payment_status = data['paymentStatus']\n    payment_request_id = data['paymentRequestId']\n\n    # 2. Process the payment result\n    if payment_status == 'SUCCESS':\n        update_order_status(payment_request_id, 'paid')\n    elif payment_status == 'FAIL':\n        update_order_status(payment_request_id, 'failed')\n\n    # 3. Acknowledge receipt\n    return jsonify({'result': {'resultStatus': 'S'}})"
          }
        ],
        "operationId": "paymentNotify"
      }
    }
  },
  "components": {
    "securitySchemes": {
      "RebellSignature": {
        "type": "apiKey",
        "in": "header",
        "name": "Signature",
        "description": "RSA SHA256 signature header. Example: `Signature: algorithm=SHA256withRSA, keyVersion=0, signature=BASE64...`"
      },
      "ClientId": {
        "type": "apiKey",
        "in": "header",
        "name": "Client-Id",
        "description": "Rebell-assigned Client Id."
      },
      "RequestTime": {
        "type": "apiKey",
        "in": "header",
        "name": "Request-Time",
        "description": "RFC3339 timestamp (e.g., 2019-05-28T12:12:00+08:00)."
      }
    },
    "schemas": {
      "Result": {
        "type": "object",
        "properties": {
          "resultStatus": {
            "type": "string",
            "enum": [
              "S",
              "F",
              "U",
              "A"
            ]
          },
          "resultCode": {
            "type": "string"
          },
          "resultMessage": {
            "type": "string"
          }
        },
        "required": [
          "resultStatus"
        ]
      },
      "Amount": {
        "type": "object",
        "properties": {
          "currency": {
            "type": "string"
          },
          "value": {
            "type": "integer"
          }
        },
        "required": [
          "currency",
          "value"
        ],
        "description": "Amount in minor units (e.g., cents)."
      },
      "Store": {
        "type": "object",
        "properties": {
          "externalStoreId": {
            "type": "string"
          }
        },
        "required": [
          "externalStoreId"
        ]
      },
      "Merchant": {
        "type": "object",
        "properties": {
          "store": {
            "$ref": "#/components/schemas/Store"
          }
        }
      },
      "Order": {
        "type": "object",
        "properties": {
          "orderDescription": {
            "type": "string"
          },
          "orderMemo": {
            "type": "string"
          },
          "latitude": {
            "type": "string"
          },
          "longitude": {
            "type": "string"
          },
          "transactionAddress": {
            "type": "string",
            "description": "Merchant store address separated by '||'. Example: 'Torino||Corso Duca degli Abruzzi,24||10129||IT||Italy'"
          },
          "merchant": {
            "$ref": "#/components/schemas/Merchant"
          }
        },
        "required": [
          "orderDescription"
        ]
      },
      "CreateQROrderRequest": {
        "type": "object",
        "properties": {
          "bizType": {
            "type": "string",
            "enum": [
              "ORDER_CODE"
            ]
          },
          "productCode": {
            "type": "string"
          },
          "codeType": {
            "type": "string",
            "enum": [
              "CGCP"
            ]
          },
          "paymentRequestId": {
            "type": "string"
          },
          "paymentAmount": {
            "$ref": "#/components/schemas/Amount"
          },
          "order": {
            "$ref": "#/components/schemas/Order"
          },
          "paymentNotifyUrl": {
            "type": "string",
            "format": "uri"
          },
          "extendInfo": {
            "type": "string",
            "description": "JSON string e.g. {\"key\":\"value\"}"
          }
        },
        "required": [
          "bizType",
          "productCode",
          "codeType",
          "paymentRequestId",
          "paymentAmount"
        ]
      },
      "CreateQROrderResponse": {
        "type": "object",
        "properties": {
          "result": {
            "$ref": "#/components/schemas/Result"
          },
          "paymentRequestId": {
            "type": "string"
          },
          "paymentId": {
            "type": "string"
          },
          "qrCode": {
            "type": "string"
          }
        },
        "required": [
          "result"
        ]
      },
      "InquiryRequest": {
        "type": "object",
        "properties": {
          "paymentId": {
            "type": "string"
          },
          "paymentRequestId": {
            "type": "string"
          }
        },
        "required": [
          "paymentId",
          "paymentRequestId"
        ]
      },
      "InquiryResponse": {
        "type": "object",
        "properties": {
          "result": {
            "$ref": "#/components/schemas/Result"
          },
          "paymentId": {
            "type": "string"
          },
          "paymentRequestId": {
            "type": "string"
          },
          "paymentStatus": {
            "type": "string",
            "enum": [
              "SUCCESS",
              "PROCESSING",
              "FAIL"
            ]
          },
          "paymentTime": {
            "type": "string",
            "format": "date-time"
          },
          "paymentAmount": {
            "$ref": "#/components/schemas/Amount"
          }
        },
        "required": [
          "result",
          "paymentStatus"
        ]
      },
      "RetailPayRequest": {
        "type": "object",
        "properties": {
          "productCode": {
            "type": "string"
          },
          "paymentRequestId": {
            "type": "string"
          },
          "paymentAuthCode": {
            "type": "string",
            "description": "User wallet QR/Barcode content"
          },
          "paymentAmount": {
            "$ref": "#/components/schemas/Amount"
          },
          "order": {
            "$ref": "#/components/schemas/Order"
          },
          "paymentNotifyUrl": {
            "type": "string",
            "format": "uri"
          },
          "extendInfo": {
            "type": "string"
          }
        },
        "required": [
          "productCode",
          "paymentRequestId",
          "paymentAuthCode",
          "paymentAmount",
          "paymentNotifyUrl"
        ]
      },
      "RetailPayResponse": {
        "type": "object",
        "properties": {
          "result": {
            "$ref": "#/components/schemas/Result"
          },
          "paymentRequestId": {
            "type": "string"
          },
          "paymentId": {
            "type": "string"
          },
          "paymentTime": {
            "type": "string",
            "format": "date-time"
          },
          "paymentAmount": {
            "$ref": "#/components/schemas/Amount"
          }
        },
        "required": [
          "result"
        ]
      },
      "PaymentNotification": {
        "type": "object",
        "properties": {
          "paymentId": {
            "type": "string"
          },
          "paymentRequestId": {
            "type": "string"
          },
          "paymentStatus": {
            "type": "string",
            "enum": [
              "SUCCESS",
              "PROCESSING",
              "FAIL"
            ]
          },
          "paymentAmount": {
            "$ref": "#/components/schemas/Amount"
          },
          "paymentTime": {
            "type": "string",
            "format": "date-time"
          },
          "paymentCreatedTime": {
            "type": "string",
            "description": "ISO 8601 creation time"
          }
        },
        "required": [
          "paymentId",
          "paymentRequestId",
          "paymentStatus",
          "paymentAmount",
          "paymentTime"
        ]
      },
      "WebhookAck": {
        "type": "object",
        "properties": {
          "result": {
            "$ref": "#/components/schemas/Result"
          }
        },
        "required": [
          "result"
        ]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "result": {
            "$ref": "#/components/schemas/Result"
          }
        },
        "required": [
          "result"
        ]
      },
      "SettlementStrategy": {
        "type": "object",
        "properties": {
          "settlementCurrency": {
            "type": "string",
            "description": "Settlement currency (e.g., EUR)"
          }
        }
      },
      "LinkPayCreateRequest": {
        "type": "object",
        "properties": {
          "productCode": {
            "type": "string",
            "description": "Payment product type assigned by Rebell"
          },
          "paymentRequestId": {
            "type": "string",
            "description": "Merchant-generated unique ID (idempotency key). Must be unique per transaction."
          },
          "paymentAmount": {
            "$ref": "#/components/schemas/Amount"
          },
          "order": {
            "$ref": "#/components/schemas/Order"
          },
          "settlementStrategy": {
            "$ref": "#/components/schemas/SettlementStrategy"
          }
        },
        "required": [
          "productCode",
          "paymentRequestId",
          "paymentAmount"
        ]
      },
      "AppLinkPlatform": {
        "type": "object",
        "properties": {
          "applicationId": {
            "type": "string",
            "description": "Android application ID or iOS bundle ID"
          },
          "bundleId": {
            "type": "string",
            "description": "iOS bundle ID"
          },
          "targetPath": {
            "type": "string",
            "description": "Deep link path within the app"
          },
          "shortUrl": {
            "type": "string",
            "format": "uri",
            "description": "Short URL for the redirect"
          }
        }
      },
      "AppLinks": {
        "type": "object",
        "properties": {
          "android": {
            "$ref": "#/components/schemas/AppLinkPlatform"
          },
          "ios": {
            "$ref": "#/components/schemas/AppLinkPlatform"
          }
        },
        "description": "Platform-specific app link metadata"
      },
      "LinkPayCreateResponse": {
        "type": "object",
        "properties": {
          "result": {
            "$ref": "#/components/schemas/Result"
          },
          "redirectUrl": {
            "type": "string",
            "description": "Deep link to open Rebell SuperApp directly"
          },
          "appLinks": {
            "$ref": "#/components/schemas/AppLinks"
          },
          "paymentId": {
            "type": "string",
            "description": "Payment identifier to be used for inquiry or reconciliation"
          }
        },
        "required": [
          "result"
        ]
      }
    }
  },
  "x-swagger-ui-requestInterceptor": "\n// public/index.html (inside SwaggerUIBundle config)\nconst CLIENT_ID = \"YOUR_CLIENT_ID\";\nconst KEY_VERSION = \"0\";\nasync function signLocally(toSign) {\n  const r = await fetch(\"/sign\", { method: \"POST\", headers: { \"content-type\": \"application/json\" }, body: JSON.stringify({ toSign }) });\n  const { signatureB64 } = await r.json();\n  return signatureB64;\n}\nconst ui = SwaggerUIBundle({\n  url: \"rebell-openapi.yaml\",\n  dom_id: \"#swagger-ui\",\n  requestInterceptor: async (req) => {\n    const requestTime = new Date().toISOString();\n    const bodyStr = req.body ? (typeof req.body === \"string\" ? req.body : JSON.stringify(req.body)) : \"\";\n    const path = new URL(req.url).pathname;\n    const toSign = [req.method.toUpperCase(), path, CLIENT_ID, requestTime, bodyStr].join(\"\\n\");\n    const signatureB64 = await signLocally(toSign);\n    req.headers[\"Client-Id\"] = CLIENT_ID;\n    req.headers[\"Request-Time\"] = requestTime;\n    req.headers[\"Signature\"] = `algorithm=SHA256withRSA, keyVersion=${KEY_VERSION}, signature=${signatureB64}`;\n    return req;\n  },\n  layout: \"BaseLayout\",\n});\n\n// signer.js (localhost helper)\nimport express from \"express\";\nimport crypto from \"crypto\";\nconst app = express();\napp.use(express.json());\nconst PRIVATE_KEY = process.env.REBELL_PRIVKEY_PEM;\napp.post(\"/sign\", (req, res) => {\n  const signer = crypto.createSign(\"RSA-SHA256\");\n  signer.update(req.body.toSign);\n  res.json({ signatureB64: signer.sign(PRIVATE_KEY, \"base64\") });\n});\napp.listen(3000);\n"
}
